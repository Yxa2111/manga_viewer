<template>
    <div class="header-container">
        {{loading}} {{currentTitle}}
    </div>
</template>

<script>
    import { mapState } from 'vuex'

    export default {
        name: "Header",
        computed: {
            ...mapState(['currentTitle', 'loadingDetail']),
        },
        data () {
            return {
                loading: ''
            }
        },
        watch: {
            loadingDetail: function(detail) {
                if (detail == null) {
                    this.loading = ''
                } else {
                    if (detail.total == 0) {
                        this.loading = `${detail.status} ${detail.name}`
                    } else {
                        this.loading = `${detail.status} ${detail.name}: ${Number((detail.loaded / detail.total * 100).toFixed(1))}%`
                    }
                }
            }
        }
    }
</script>

<style lang="stylus" scoped>
    .header-container
        color: white;
        background rgba(0,0,0, 0.5);
        top 0
        right 0
        left 0
        position fixed
        z-index 2
        height .86rem
        line-height .86rem
        text-align center
</style>
